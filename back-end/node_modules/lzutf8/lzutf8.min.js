/*
 LZ-UTF8 v0.3.2

 Copyright (c) 2014-2015, Rotem Dan <rotemdan@gmail.com> 
 Released under the MIT license.

 Build date: 2015-09-18 
*/
var LZUTF8;!function(a){function b(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node}a.runningInNodeJS=b,"object"==typeof module&&"object"==typeof module.exports&&(module.exports=a)}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.compressAsync=function(b,c,d){var e=new a.Timer,f=new a.Compressor;if(!d)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof b)b=a.encodeUTF8(b);else if(null==b||!(b instanceof Uint8Array))return void d(void 0,new TypeError("compressAsync: Invalid input argument"));var g=a.ArrayTools.splitByteArray(b,c.blockSize),h=[],i=function(b){if(b<g.length){try{var j=f.compressBlock(g[b])}catch(k){return void d(void 0,k)}h.push(j),e.getElapsedTime()<=20?i(b+1):(a.enqueueImmediate(function(){return i(b+1)}),e.restart())}else{var l=a.ArrayTools.joinByteArrays(h);a.enqueueImmediate(function(){try{var b=a.CompressionCommon.encodeCompressedBytes(l,c.outputEncoding)}catch(e){return void d(void 0,e)}a.enqueueImmediate(function(){return d(b)})})}};a.enqueueImmediate(function(){return i(0)})},b.createCompressionStream=function(){var b=new a.Compressor,c=require("stream"),d=new c.Transform({decodeStrings:!0,highWaterMark:65536});return d._transform=function(a,c,e){try{var f=new Buffer(b.compressBlock(new Uint8Array(a)))}catch(g){return void d.emit("error",g)}d.push(f),e()},d},b}();a.AsyncCompressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.decompressAsync=function(b,c,d){if(!d)throw new TypeError("compressAsync: No callback argument given");var e=new a.Timer;try{b=a.CompressionCommon.decodeCompressedData(b,c.inputEncoding)}catch(f){return void d(void 0,f)}var g=new a.Decompressor,h=a.ArrayTools.splitByteArray(b,c.blockSize),i=[],j=function(b){if(b<h.length){try{var f=g.decompressBlock(h[b])}catch(k){return void d(void 0,k)}i.push(f),e.getElapsedTime()<=20?j(b+1):(a.enqueueImmediate(function(){return j(b+1)}),e.restart())}else{var l=a.ArrayTools.joinByteArrays(i);a.enqueueImmediate(function(){try{var b=a.CompressionCommon.encodeDecompressedBytes(l,c.outputEncoding)}catch(e){return void d(void 0,e)}a.enqueueImmediate(function(){return d(b)})})}};a.enqueueImmediate(function(){return j(0)})},b.createDecompressionStream=function(){var b=new a.Decompressor,c=require("stream"),d=new c.Transform({decodeStrings:!0,highWaterMark:65536});return d._transform=function(a,c,e){try{var f=new Buffer(b.decompressBlock(new Uint8Array(a)))}catch(g){return void d.emit("error",g)}d.push(f),e()},d},b}();a.AsyncDecompressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.compressAsync=function(c,d,e){var f=d.inputEncoding,g=d.outputEncoding;if(b.supportsTransferableObjects){if("ByteArray"==d.inputEncoding&&!(c instanceof Uint8Array))return void e(void 0,new TypeError("compressAsync: input is not a Uint8Array"))}else{if("ByteArray"==d.inputEncoding){try{c=a.decodeUTF8(c)}catch(h){return void e(void 0,h)}f="String"}"ByteArray"==d.outputEncoding&&(g="BinaryString")}var i={token:Math.random().toString(),type:"compress",data:c,inputEncoding:f,outputEncoding:g};"ByteArray"==i.inputEncoding?b.globalWorker.postMessage(i,[new Uint8Array(i.data).buffer]):b.globalWorker.postMessage(i,[]);var j=function(c){var f=c.data;f&&f.token==i.token&&(b.globalWorker.removeEventListener("message",j),"ByteArray"==d.outputEncoding&&"BinaryString"==f.inputEncoding&&(f.data=a.decodeBinaryString(f.data)),a.enqueueImmediate(function(){return e(f.data)}))};b.globalWorker.addEventListener("message",j),b.globalWorker.addEventListener("error",function(a){e(void 0,a)})},b.decompressAsync=function(c,d,e){var f=d.inputEncoding,g=d.outputEncoding;if(!b.supportsTransferableObjects){if("ByteArray"==d.inputEncoding){try{c=a.encodeBinaryString(c)}catch(h){return void e(void 0,h)}f="BinaryString"}"ByteArray"==d.outputEncoding&&(g="String")}var i={token:Math.random().toString(),type:"decompress",data:c,inputEncoding:f,outputEncoding:g};"ByteArray"==i.inputEncoding?b.globalWorker.postMessage(i,[new Uint8Array(i.data).buffer]):b.globalWorker.postMessage(i,[]);var j=function(c){var f=c.data;f&&f.token==i.token&&(b.globalWorker.removeEventListener("message",j),"ByteArray"==d.outputEncoding&&"String"==f.inputEncoding&&(f.data=a.encodeUTF8(f.data)),a.enqueueImmediate(function(){return e(f.data)}))};b.globalWorker.addEventListener("message",j),b.globalWorker.addEventListener("error",function(a){e(void 0,a)})},b.workerMessageHandler=function(b){var c=b.data;if("compress"==c.type){var d=a.compress(c.data,{outputEncoding:c.outputEncoding}),e={token:c.token,type:"compressionResult",data:d,inputEncoding:c.outputEncoding};"ByteArray"==e.inputEncoding?self.postMessage(e,[d.buffer]):self.postMessage(e,[])}else if("decompress"==c.type){var f=a.decompress(c.data,{inputEncoding:c.inputEncoding,outputEncoding:c.outputEncoding}),e={token:c.token,type:"decompressionResult",data:f,inputEncoding:c.outputEncoding};"ByteArray"==e.inputEncoding?self.postMessage(e,[f.buffer]):self.postMessage(e,[])}},b.registerListenerIfRunningInWebWorker=function(){"object"==typeof self&&void 0===self.document&&void 0!=self.addEventListener&&(self.addEventListener("message",b.workerMessageHandler),self.addEventListener("error",function(a){console.log("LZUTF8 WebWorker exception: "+a.message)}))},b.createGlobalWorkerIfItDoesntExist=function(){if(!b.globalWorker){if(!b.isSupported())throw new Error("createGlobalWorkerIfItDoesntExist: Web workers are not supported or script source is not available");b.scriptURI||(b.scriptURI=document.getElementById("lzutf8").getAttribute("src")),b.globalWorker=new Worker(b.scriptURI),b.supportsTransferableObjects=b.testSupportForTransferableObjects()}},b.isSupported=function(){if(b.globalWorker)return!0;if("object"!=typeof window||"function"!=typeof window.Worker)return!1;if(b.scriptURI)return!0;var a=document.getElementById("lzutf8");return a&&"SCRIPT"==a.tagName?!0:(console.log("Cannot use a web worker as no script element with id 'lzutf8' was found in the page"),!1)},b.testSupportForTransferableObjects=function(){if("undefined"==typeof Uint8Array)return!1;if(!b.globalWorker)throw new Error("testSupportForTransferableObjects: No global worker created");var a=new ArrayBuffer(1);try{b.globalWorker.postMessage(a,[a])}catch(c){return!1}return 0===a.byteLength},b.terminate=function(){b.globalWorker&&(b.globalWorker.terminate(),b.globalWorker=void 0)},b}();a.WebWorker=b,b.registerListenerIfRunningInWebWorker()}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(){}return a.prototype.get=function(a){return this.container[this.startPosition+a]},a.prototype.getInReversedOrder=function(a){return this.container[this.startPosition+this.length-1-a]},a.prototype.set=function(a,b){this.container[this.startPosition+a]=b},a}();a.ArraySegment=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(){}return a.copyElements=function(a,b,c,d,e){for(;e--;)c[d++]=a[b++]},a.zeroElements=function(a,b,c){for(;c--;)a[b++]=0},a.find=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},a.compareSequences=function(a,b){var c=!0,d=!0;a.length!==b.length&&(console.log("Sequence length did not match: sequence 1 length is "+a.length+", sequence 2 length is "+b.length),c=!1);for(var e=0;e<Math.min(a.length,b.length);e++)if(a[e]!==b[e]){console.log("Sequence elements did not match: sequence1["+e+"] === "+a[e]+", sequence2["+e+"] === "+b[e]),d=!1;break}return c&&d},a.countNonzeroValuesInArray=function(a){for(var b=0,c=0;c<a.length;c++)a[c]&&b++;return b},a.truncateStartingElements=function(a,b){if(a.length<=b)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var c=a.length-b,d=0;b>d;d++)a[d]=a[c+d];a.length=b},a.doubleByteArrayCapacity=function(a){var b=new Uint8Array(2*a.length);return b.set(a),b},a.joinByteArrays=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].length;for(var d=new Uint8Array(b),e=0,c=0;c<a.length;c++)d.set(a[c],e),e+=a[c].length;return d},a.splitByteArray=function(a,b){for(var c=[],d=0;d<a.length;){var e=Math.min(b,a.length-d);c.push(a.subarray(d,d+e)),d+=e}return c},a.convertToUint8ArrayIfNeeded=function(a){return"function"==typeof Buffer&&a instanceof Buffer?new Uint8Array(a):a},a}();a.ArrayTools=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.getCroppedBuffer=function(a,b,c,d){void 0===d&&(d=0);var e=new Uint8Array(c+d);return e.set(a.subarray(b,b+c)),e},b.getCroppedAndAppendedBuffer=function(b,c,d,e){return a.ArrayTools.joinByteArrays([b.subarray(c,c+d),e])},b.detectCompressionSourceEncoding=function(a){return"string"==typeof a?"String":"ByteArray"},b.encodeCompressedBytes=function(b,c){switch(c){case"ByteArray":return b;case"Buffer":return new Buffer(b);case"BinaryString":return a.encodeBinaryString(b);case"Base64":return a.encodeBase64(b);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},b.decodeCompressedData=function(b,c){if("ByteArray"==c&&"string"==typeof b)throw new TypeError("decodeCompressedData: receieved input was string when encoding was set to a ByteArray");switch(c){case"ByteArray":return b;case"BinaryString":return a.decodeBinaryString(b);case"Base64":return a.decodeBase64(b);default:throw new TypeError("decodeCompressedData: invalid input encoding requested")}},b.encodeDecompressedBytes=function(b,c){switch(c){case"ByteArray":return b;case"Buffer":return new Buffer(b);case"String":return a.decodeUTF8(b);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}},b}();a.CompressionCommon=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.enqueueImmediate=function(c){a.runningInNodeJS()?setImmediate(c):"object"==typeof window&&void 0!==window.postMessage?(b.instanceToken||b.registerWindowMessageHandler(),b.queuedFunctions.push(c),window.postMessage(b.instanceToken,window.location.href)):setTimeout(c,0)},b.registerWindowMessageHandler=function(){var a=this;b.instanceToken="EventLoop.enqueueImmediate-"+Math.random(),b.queuedFunctions=[],window.addEventListener("message",function(c){if(c.data==b.instanceToken&&0!==a.queuedFunctions.length){var d=b.queuedFunctions.shift();try{d.call(void 0)}catch(e){"object"==typeof e?console.log("enqueueImmediate exception: "+JSON.stringify(e)):console.log("enqueueImmediate exception: "+e)}}})},b}();a.EventLoop=b,a.enqueueImmediate=b.enqueueImmediate}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(){}return a.extendObject=function(a,b){if(null!=b)for(var c in b)a[c]=b[c];return a},a.findPropertyInObject=function(a,b){for(var c in b)if(b[c]===a)return c;return null},a}();a.ObjectTools=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(){this.outputBuffer=new Array(1024),this.outputPosition=0,this.outputString=""}return a.prototype.append=function(a){this.outputBuffer[this.outputPosition++]=a,1024===this.outputPosition&&this.flushBufferToOutputString()},a.prototype.appendCodePoint=function(a){if(65535>=a)this.append(a);else{if(!(1114111>=a))throw new RangeError("StringBuilder.appendCodePoint: A code point of "+a+" cannot be encoded in UTF-16");this.append(55296+(a-65536>>>10)),this.append(56320+(a-65536&1023))}},a.prototype.toString=function(){return this.flushBufferToOutputString(),this.outputString},a.prototype.flushBufferToOutputString=function(){1024===this.outputPosition?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.slice(0,this.outputPosition)),this.outputPosition=0},a}();a.StringBuilder=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(b){b?this.getTimestamp=b:this.getTimestamp=a.getHighResolutionTimestampFunction(),this.restart()}return a.prototype.restart=function(){this.startTime=this.getTimestamp()},a.prototype.getElapsedTime=function(){return this.getTimestamp()-this.startTime},a.prototype.getElapsedTimeAndRestart=function(){var a=this.getElapsedTime();return this.restart(),a},a.prototype.logAndRestart=function(a,b){void 0===b&&(b=!1);var c=a+": "+this.getElapsedTime().toFixed(3);console.log(c),b&&"object"==typeof document&&(document.body.innerHTML+=c+"<br/>"),this.restart()},a.prototype.getTimestamp=function(){return void 0},a.getHighResolutionTimestampFunction=function(){if("object"==typeof chrome&&chrome.Interval){var a=new chrome.Interval;return a.start(),function(){return a.microseconds()/1e3}}return"object"==typeof window&&window.performance&&window.performance.now?function(){return window.performance.now()}:"object"==typeof process&&process.hrtime?function(){var a=process.hrtime();return 1e3*a[0]+a[1]/1e6}:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()}},a}();a.Timer=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(b){void 0===b&&(b=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,this.reusableArraySegmentObject=new a.ArraySegment,b&&"function"==typeof Uint32Array?this.prefixHashTable=new a.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new a.CompressorSimpleHashTable(this.PrefixHashTableSize)}return b.prototype.compressBlock=function(b){if(void 0===b||null===b)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof b&&(b=a.encodeUTF8(b)),b=a.ArrayTools.convertToUint8ArrayIfNeeded(b),this.compressByteArrayBlock(b)},b.prototype.compressByteArrayBlock=function(a){if(!a||0==a.length)return new Uint8Array(0);var b=this.cropAndAddNewBytesToInputBuffer(a),c=this.inputBuffer,d=this.inputBuffer.length;this.outputBuffer=new Uint8Array(a.length),this.outputBufferPosition=0;for(var e=0,f=b;d>f;f++){var g=c[f],h=e>f;if(f>d-this.MinimumSequenceLength)h||this.outputRawByte(g);else{var i=this.getBucketIndexForPrefix(f);if(!h){var j=this.findLongestMatch(f,i);null!==j&&(this.outputPointerBytes(j.length,j.distance),e=f+j.length,h=!0)}h||this.outputRawByte(g);var k=this.inputBufferStreamOffset+f;this.prefixHashTable.addValueToBucket(i,k)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},b.prototype.findLongestMatch=function(a,b){var c=this.prefixHashTable.getArraySegmentForBucketIndex(b,this.reusableArraySegmentObject);if(null==c)return null;for(var d,e,f=this.inputBuffer,g=0;g<c.length;g++){var h=c.getInReversedOrder(g)-this.inputBufferStreamOffset,i=a-h;if(void 0===d)var j=this.MinimumSequenceLength-1;else if(128>d&&i>=128)var j=e+(e>>>1);else var j=e;if(i>this.MaximumMatchDistance||j>=this.MaximumSequenceLength||a+j>=f.length)break;if(f[h+j]===f[a+j])for(var k=0;;k++){if(a+k===f.length||f[h+k]!==f[a+k]){k>j&&(d=i,e=k);break}if(k===this.MaximumSequenceLength)return{distance:i,length:this.MaximumSequenceLength}}}return void 0!==d?{distance:d,length:e}:null},b.prototype.getBucketIndexForPrefix=function(a){return(7880599*this.inputBuffer[a]+39601*this.inputBuffer[a+1]+199*this.inputBuffer[a+2]+this.inputBuffer[a+3])%this.PrefixHashTableSize},b.prototype.outputPointerBytes=function(a,b){128>b?(this.outputRawByte(192|a),this.outputRawByte(b)):(this.outputRawByte(224|a),this.outputRawByte(b>>>8),this.outputRawByte(255&b))},b.prototype.outputRawByte=function(a){this.outputBuffer[this.outputBufferPosition++]=a},b.prototype.cropAndAddNewBytesToInputBuffer=function(b){if(void 0===this.inputBuffer)return this.inputBuffer=b,0;var c=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),d=this.inputBuffer.length-c;return this.inputBuffer=a.CompressionCommon.getCroppedAndAppendedBuffer(this.inputBuffer,d,c,b),this.inputBufferStreamOffset+=d,c},b.prototype.logStatisticsToConsole=function(a){var b=this.prefixHashTable.getUsedBucketCount(),c=this.prefixHashTable.getTotalElementCount();console.log("Compressed size: "+this.outputBufferPosition+"/"+a+" ("+(this.outputBufferPosition/a*100).toFixed(2)+"%)"),console.log("Occupied bucket count: "+b+"/"+this.PrefixHashTableSize),console.log("Total hashtable element count: "+c+" ("+(c/b).toFixed(2)+" elements per occupied bucket on average)"),console.log("")},b}();a.Compressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(a){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*a),this.storage=new Uint32Array(2*a),this.storageIndex=1}return b.prototype.addValueToBucket=function(b,c){b<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var d=this.bucketLocators[b];if(0===d){d=this.storageIndex;var e=1;this.storage[this.storageIndex]=c,this.storageIndex+=this.minimumBucketCapacity}else{var e=this.bucketLocators[b+1];e===this.maximumBucketCapacity-1&&(e=this.truncateBucketToNewerElements(d,e,this.maximumBucketCapacity/2));var f=d+e;0===this.storage[f]?(this.storage[f]=c,f===this.storageIndex&&(this.storageIndex+=e)):(a.ArrayTools.copyElements(this.storage,d,this.storage,this.storageIndex,e),d=this.storageIndex,this.storageIndex+=e,this.storage[this.storageIndex++]=c,this.storageIndex+=e),e++}this.bucketLocators[b]=d,this.bucketLocators[b+1]=e},b.prototype.truncateBucketToNewerElements=function(b,c,d){var e=b+c-d;return a.ArrayTools.copyElements(this.storage,e,this.storage,b,d),a.ArrayTools.zeroElements(this.storage,b+d,c-d),d},b.prototype.compact=function(){var b=this.bucketLocators,c=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var d=0;d<b.length;d+=2){var e=b[d+1];0!==e&&(this.bucketLocators[d]=this.storageIndex,this.bucketLocators[d+1]=e,this.storageIndex+=Math.max(Math.min(2*e,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(var d=0;d<b.length;d+=2){var f=b[d];if(0!==f){var g=this.bucketLocators[d],e=this.bucketLocators[d+1];a.ArrayTools.copyElements(c,f,this.storage,g,e)}}},b.prototype.getArraySegmentForBucketIndex=function(b,c){b<<=1;var d=this.bucketLocators[b];return 0===d?null:(void 0===c&&(c=new a.ArraySegment),c.container=this.storage,c.startPosition=d,c.length=this.bucketLocators[b+1],c)},b.prototype.getUsedBucketCount=function(){return Math.floor(a.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},b.prototype.getTotalElementCount=function(){for(var a=0,b=0;b<this.bucketLocators.length;b+=2)a+=this.bucketLocators[b+1];return a},b}();a.CompressorCustomHashTable=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(a){this.maximumBucketCapacity=64,this.buckets=new Array(a)}return b.prototype.addValueToBucket=function(b,c){var d=this.buckets[b];void 0===d?this.buckets[b]=[c]:(d.length===this.maximumBucketCapacity-1&&a.ArrayTools.truncateStartingElements(d,this.maximumBucketCapacity/2),d.push(c))},b.prototype.getArraySegmentForBucketIndex=function(b,c){var d=this.buckets[b];return void 0===d?null:(void 0===c&&(c=new a.ArraySegment),c.container=d,c.startPosition=0,c.length=d.length,c)},b.prototype.getUsedBucketCount=function(){return a.ArrayTools.countNonzeroValuesInArray(this.buckets)},b.prototype.getTotalElementCount=function(){for(var a=0,b=0;b<this.buckets.length;b++)void 0!==this.buckets[b]&&(a+=this.buckets[b].length);return a},b}();a.CompressorSimpleHashTable=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){this.MaximumMatchDistance=32767,this.outputPosition=0}return b.prototype.decompressBlockToString=function(b){return b=a.ArrayTools.convertToUint8ArrayIfNeeded(b),a.decodeUTF8(this.decompressBlock(b))},b.prototype.decompressBlock=function(b){if(void 0===b||null===b)throw new TypeError("decompressBlock: undefined or null input received");b=a.ArrayTools.convertToUint8ArrayIfNeeded(b),this.inputBufferRemainder&&(b=a.ArrayTools.joinByteArrays([this.inputBufferRemainder,b]),this.inputBufferRemainder=void 0);for(var c=this.cropOutputBufferToWindowAndInitialize(Math.max(4*b.length,1024)),d=0,e=b.length;e>d;d++){var f=b[d];if(f>>>6==3){var g=f>>>5;if(d==e-1||d==e-2&&7==g){this.inputBufferRemainder=b.subarray(d);break}if(b[d+1]>>>7===1)this.outputByte(f);else{var h,i=31&f;6==g?(h=b[d+1],d+=1):(h=b[d+1]<<8|b[d+2],d+=2);for(var j=this.outputPosition-h,k=0;i>k;k++)this.outputByte(this.outputBuffer[j+k])}}else this.outputByte(f)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),a.CompressionCommon.getCroppedBuffer(this.outputBuffer,c,this.outputPosition-c)},b.prototype.outputByte=function(b){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=a.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=b},b.prototype.cropOutputBufferToWindowAndInitialize=function(b){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(b),0;var c=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=a.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-c,c,b),this.outputPosition=c,this.outputBufferRemainder){for(var d=0;d<this.outputBufferRemainder.length;d++)this.outputByte(this.outputBufferRemainder[d]);this.outputBufferRemainder=void 0}return c},b.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var a=1;4>=a&&this.outputPosition-a>=0;a++){var b=this.outputBuffer[this.outputPosition-a];if(4>a&&b>>>3===30||3>a&&b>>>4===14||2>a&&b>>>5===6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-a,this.outputPosition),void(this.outputPosition-=a)}},b}();a.Decompressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){var c=function(){function c(){}return c.encode=function(c,d){if(void 0===d&&(d=!0),null==c)throw new TypeError("Base64.encode: invalid input type");if(0==c.length)return"";for(var e,f=b.Base64.charCodeMap,g=new a.StringBuilder,h=0,i=c.length;i>h;h+=3)i-3>=h?(e=c[h]<<16|c[h+1]<<8|c[h+2],g.append(f[e>>>18&63]),g.append(f[e>>>12&63]),g.append(f[e>>>6&63]),g.append(f[63&e]),e=0):h===i-2?(e=c[h]<<16|c[h+1]<<8,g.append(f[e>>>18&63]),g.append(f[e>>>12&63]),g.append(f[e>>>6&63]),d&&g.append(b.Base64.paddingCharCode)):h===i-1&&(e=c[h]<<16,g.append(f[e>>>18&63]),g.append(f[e>>>12&63]),d&&(g.append(b.Base64.paddingCharCode),g.append(b.Base64.paddingCharCode)));return g.toString()},c.decode=function(a,c){if("string"!=typeof a)throw new TypeError("Base64.decode: invalid input type");if(0===a.length)return new Uint8Array(0);var d=a.length%4;if(1===d)throw new Error("Invalid Base64 string: length % 4 == 1");2===d?a+=b.Base64.paddingCharacter+b.Base64.paddingCharacter:3===d&&(a+=b.Base64.paddingCharacter);var e=b.Base64.reverseCharCodeMap;c||(c=new Uint8Array(a.length));for(var f=0,g=0,h=a.length;h>g;g+=4){var i=e[a.charCodeAt(g)]<<18|e[a.charCodeAt(g+1)]<<12|e[a.charCodeAt(g+2)]<<6|e[a.charCodeAt(g+3)];c[f++]=i>>>16&255,c[f++]=i>>>8&255,c[f++]=255&i}return a.charAt(h-1)==b.Base64.paddingCharacter&&f--,a.charAt(h-2)==b.Base64.paddingCharacter&&f--,c.subarray(0,f)},c.paddingCharacter="=",c.charCodeMap=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),c.paddingCharCode=61,c.reverseCharCodeMap=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),c}();b.Base64=c}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){var c=function(){function b(){}return b.encode=function(b){if(null==b)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===b.length)return"";for(var c=b.length,d=new a.StringBuilder,e=0,f=1,g=0;c>g;g+=2){if(g==c-1)var h=b[g]<<8;else var h=b[g]<<8|b[g+1];d.append(e<<16-f|h>>>f),e=h&(1<<f)-1,15===f?(d.append(e),e=0,f=1):f+=1,g>=c-2&&d.append(e<<16-f)}return d.append(32768|c%2),d.toString()},b.decode=function(a){if("string"!=typeof a)throw new TypeError("BinaryString.decode: invalid input type");if(""==a)return new Uint8Array(0);for(var b,c=new Uint8Array(3*a.length),d=0,e=function(a){c[d++]=a>>>8,c[d++]=255&a},f=0,g=0;g<a.length;g++){var h=a.charCodeAt(g);h>=32768?(32769==h&&d--,f=0):(0==f?b=h:(e(b<<f|h>>>15-f),b=h&(1<<15-f)-1),15==f?f=0:f+=1)}return c.subarray(0,d)},b}();b.BinaryString=c}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(a){var b=function(){function b(){}return b.binaryBytesToDecimalString=function(b){for(var c=[],d=0;d<b.length;d++)c.push(a.Misc.binaryBytesToDecimalStringLookupTable[b[d]]);return c.join(" ")},b.binaryBytesToDecimalStringLookupTable=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"],b}();a.Misc=b}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){var c=function(){function c(){}return c.encode=function(a,c){if("string"!=typeof a)throw new TypeError("UTF8.encode: null, undefined or invalid input type");if(0==a.length)return new Uint8Array(0);c||(c=new Uint8Array(4*a.length));for(var d=0,e=0;e<a.length;e++){var f=b.UTF8.getUnicodeCodePoint(a,e);if(128>f)c[d++]=f;else if(2048>f)c[d++]=192|f>>>6,c[d++]=128|63&f;else if(65536>f)c[d++]=224|f>>>12,c[d++]=128|f>>>6&63,c[d++]=128|63&f;else{if(!(1114112>f))throw new Error("UTF8.encode: Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");c[d++]=240|f>>>18,c[d++]=128|f>>>12&63,c[d++]=128|f>>>6&63,c[d++]=128|63&f,e++}}return c.subarray(0,d)},c.decode=function(b){if(null==b)throw new TypeError("UTF8.decode: null or undefined input type recieved");if(0==b.length)return"";for(var c,d,e=new a.StringBuilder,f=0,g=b.length;g>f;){if(d=b[f],d>>>7===0)c=d,f+=1;else if(d>>>5===6){if(f+1>=g)throw new Error("UTF8.decode: Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+f);c=(31&d)<<6|63&b[f+1],f+=2}else if(d>>>4===14){if(f+2>=g)throw new Error("UTF8.decode: Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+f);c=(15&d)<<12|(63&b[f+1])<<6|63&b[f+2],f+=3}else{if(d>>>3!==30)throw new Error("UTF8.decode: Invalid UTF-8 stream: An invalid lead byte value encountered at position "+f);if(f+3>=g)throw new Error("UTF8.decode: Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+f);c=(7&d)<<18|(63&b[f+1])<<12|(63&b[f+2])<<6|63&b[f+3],f+=4}e.appendCodePoint(c)}return e.toString()},c.getUnicodeCodePoint=function(a,b){var c=a.charCodeAt(b);if(55296>c||c>56319)return c;var d=a.charCodeAt(b+1);if(d>=56320&&57343>=d)return 65536+((c-55296<<10)+(d-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character not followed by a trailing one")},c.getStringFromUnicodeCodePoint=function(a){if(65535>=a)return String.fromCharCode(a);if(1114111>=a)return String.fromCharCode(55296+(a-65536>>>10),56320+(a-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of "+a+" cannot be encoded in UTF-16")},c}();b.UTF8=c}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){function b(b,c){if(void 0===b||null===b)throw new TypeError("compress: undefined or null input received");b=a.ArrayTools.convertToUint8ArrayIfNeeded(b),c=a.ObjectTools.extendObject({outputEncoding:"ByteArray"},c);var d=new a.Compressor,e=d.compressBlock(b);return a.CompressionCommon.encodeCompressedBytes(e,c.outputEncoding)}function c(b,c){if(void 0===b||null===b)throw new TypeError("decompress: undefined or null input received");b=a.ArrayTools.convertToUint8ArrayIfNeeded(b),c=a.ObjectTools.extendObject({inputEncoding:"ByteArray",outputEncoding:"String"},c),b=a.CompressionCommon.decodeCompressedData(b,c.inputEncoding);var d=new a.Decompressor,e=d.decompressBlock(b);return a.CompressionCommon.encodeDecompressedBytes(e,c.outputEncoding)}function d(b,c,d){if(null==d&&(d=function(){}),void 0===b||null===b)return void d(void 0,new TypeError("compressAsync: undefined or null input received"));b=a.ArrayTools.convertToUint8ArrayIfNeeded(b);var e={inputEncoding:a.CompressionCommon.detectCompressionSourceEncoding(b),outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536};c=a.ObjectTools.extendObject(e,c),a.EventLoop.enqueueImmediate(function(){c.useWebWorker===!0&&a.WebWorker.isSupported()?(a.WebWorker.createGlobalWorkerIfItDoesntExist(),a.WebWorker.compressAsync(b,c,d)):a.AsyncCompressor.compressAsync(b,c,d)})}function e(b,c,d){if(null==d&&(d=function(){}),void 0===b||null===b)return void d(void 0,new TypeError("decompressAsync: undefined or null input received"));b=a.ArrayTools.convertToUint8ArrayIfNeeded(b);var e={inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536};c=a.ObjectTools.extendObject(e,c),a.EventLoop.enqueueImmediate(function(){c.useWebWorker===!0&&a.WebWorker.isSupported()?(a.WebWorker.createGlobalWorkerIfItDoesntExist(),a.WebWorker.decompressAsync(b,c,d)):a.AsyncDecompressor.decompressAsync(b,c,d)})}function f(){return a.AsyncCompressor.createCompressionStream()}function g(){return a.AsyncDecompressor.createDecompressionStream()}function h(b){if("string"!=typeof b)throw new TypeError("encodeUTF8: null, undefined or invalid input type received");return a.runningInNodeJS()?new Uint8Array(new Buffer(b,"utf8")):"function"==typeof TextEncoder?(void 0===n&&(n=new TextEncoder("utf-8")),n.encode(b)):a.Encoding.UTF8.encode(b)}function i(b){if(null==b)throw new TypeError("decodeUTF8: undefined or null input received");if(a.runningInNodeJS()){var c;if(b instanceof Uint8Array)c=new Buffer(b);else{if(!(b instanceof Buffer))throw new TypeError("decodeUTF8: invalid input type");c=b}return c.toString("utf8")}return"function"==typeof TextDecoder?(void 0===o&&(o=new TextDecoder("utf-8")),o.decode(b)):a.Encoding.UTF8.decode(b)}function j(b){if(null==b)throw new TypeError("encodeBase64: undefined or null input received");if(a.runningInNodeJS()){var c;if(b instanceof Uint8Array)c=new Buffer(b);else{if(!(b instanceof Buffer))throw new TypeError("encodeBase64: invalid input type");c=b}var d=c.toString("base64");
if(null==d)throw new Error("encodeBase64: failed encdoing Base64");return d}return a.Encoding.Base64.encode(b)}function k(b){if("string"!=typeof b)throw new TypeError("decodeBase64: invalid input type received");if(a.runningInNodeJS()){var c=new Uint8Array(new Buffer(b,"base64"));if(null===c)throw new Error("decodeBase64: failed decoding Base64");return c}return a.Encoding.Base64.decode(b)}function l(b){return b=a.ArrayTools.convertToUint8ArrayIfNeeded(b),a.Encoding.BinaryString.encode(b)}function m(b){return a.Encoding.BinaryString.decode(b)}a.compress=b,a.decompress=c,a.compressAsync=d,a.decompressAsync=e,a.createCompressionStream=f,a.createDecompressionStream=g;var n,o;a.encodeUTF8=h,a.decodeUTF8=i,a.encodeBase64=j,a.decodeBase64=k,a.encodeBinaryString=l,a.decodeBinaryString=m}(LZUTF8||(LZUTF8={}));